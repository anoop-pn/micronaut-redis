plugins {
    id "io.micronaut.build.internal.module"
    id 'org.checkerframework' version '0.6.16'
}

apply plugin: 'org.checkerframework'

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
    mavenLocal()
}

checkerFramework {
    checkers = [
            'edu.ucr.cs.riple.taint.ucrtainting.UCRTaintingChecker',
    ]
    extraJavacArgs = [
            '-Awarns',
            '-AstubDebug'
    ]
}

dependencies {
    annotationProcessor libs.micronaut.graal

    api libs.managed.lettuce
    api libs.micronaut.cache

    compileOnly libs.micronaut.session
    compileOnly libs.micronaut.management
    compileOnly libs.micronaut.micrometer
    compileOnly libs.redis.embedded

    testAnnotationProcessor libs.micronaut.inject.java

    testImplementation platform(libs.testcontainers.bom)
    testImplementation libs.testcontainers.spock

    testImplementation libs.projectreactor

    testImplementation libs.micronaut.cache
    testImplementation libs.micronaut.inject.java
    testImplementation libs.micronaut.management
    testImplementation libs.micronaut.micrometer
    testImplementation libs.micronaut.inject.groovy
    testImplementation libs.micronaut.function.web

    testImplementation libs.micronaut.session
    testRuntimeOnly libs.micronaut.http.server.netty
    testImplementation libs.micronaut.http.client
    testImplementation libs.redis.embedded
    annotationProcessor 'edu.ucr.cs.riple.taint:ucrtainting-checker:0.1'
    implementation 'edu.ucr.cs.riple.taint:ucrtainting-checker:0.1'
}
